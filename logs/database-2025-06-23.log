{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:22:00.791Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:22:00.796Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:22:00.798Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:22:00.801Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:22:00.803Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:22:00.811Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:22:01.015Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE username = ?","service":"nexus-db","timestamp":"2025-06-23T11:22:35.406Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT co.*, c.name as client_name, c.surname as client_surname, p.name as product_name, p.supplier as product_supplier FROM contracts co JOIN clients c ON co.client_id = c.id LEFT JOIN products p ON co.product_id = p.id ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:22:41.269Z"}
{"error":"SQLITE_ERROR: no such column: co.product_id","level":"error","message":"Database all error","params":[],"query":"\n      SELECT co.*, c.name as client_name, c.surname as client_surname, \n             p.name as product_name, p.supplier as product_supplier\n      FROM contracts co\n      JOIN clients c ON co.client_id = c.id\n      LEFT JOIN products p ON co.product_id = p.id\n     ORDER BY co.created_at DESC","service":"nexus-db","stack":"Error: SQLITE_ERROR: no such column: co.product_id\n--> in Database#all('\\n' +\n  '      SELECT co.*, c.name as client_name, c.surname as client_surname, \\n' +\n  '             p.name as product_name, p.supplier as product_supplier\\n' +\n  '      FROM contracts co\\n' +\n  '      JOIN clients c ON co.client_id = c.id\\n' +\n  '      LEFT JOIN products p ON co.product_id = p.id\\n' +\n  '     ORDER BY co.created_at DESC', [], [Function (anonymous)])\n    at Database.all (C:\\progetti\\nexus-crm\\middleware\\logging.js:115:27)\n    at Contract.getAll (C:\\progetti\\nexus-crm\\models\\contract.js:23:8)\n    at C:\\progetti\\nexus-crm\\routes\\contracts.js:13:12\n    at Layer.handle [as handle_request] (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-06-23T11:22:41.273Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT energy_type, COUNT(*) as count, SUM(value) as total_value FROM contracts WHERE status = 'accepted' GROUP BY energy_type","service":"nexus-db","timestamp":"2025-06-23T11:22:45.644Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT co.*, c.name as client_name, c.surname as client_surname, p.name as product_name, p.supplier as product_supplier FROM contracts co JOIN clients c ON co.client_id = c.id LEFT JOIN products p ON co.product_id = p.id ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:22:47.369Z"}
{"error":"SQLITE_ERROR: no such column: co.product_id","level":"error","message":"Database all error","params":[],"query":"\n      SELECT co.*, c.name as client_name, c.surname as client_surname, \n             p.name as product_name, p.supplier as product_supplier\n      FROM contracts co\n      JOIN clients c ON co.client_id = c.id\n      LEFT JOIN products p ON co.product_id = p.id\n     ORDER BY co.created_at DESC","service":"nexus-db","stack":"Error: SQLITE_ERROR: no such column: co.product_id\n--> in Database#all('\\n' +\n  '      SELECT co.*, c.name as client_name, c.surname as client_surname, \\n' +\n  '             p.name as product_name, p.supplier as product_supplier\\n' +\n  '      FROM contracts co\\n' +\n  '      JOIN clients c ON co.client_id = c.id\\n' +\n  '      LEFT JOIN products p ON co.product_id = p.id\\n' +\n  '     ORDER BY co.created_at DESC', [], [Function (anonymous)])\n    at Database.all (C:\\progetti\\nexus-crm\\middleware\\logging.js:115:27)\n    at Contract.getAll (C:\\progetti\\nexus-crm\\models\\contract.js:23:8)\n    at C:\\progetti\\nexus-crm\\routes\\contracts.js:13:12\n    at Layer.handle [as handle_request] (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-06-23T11:22:47.371Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["2025-06-23"],"query":"SELECT a.*, c.name as client_name, c.surname as client_surname FROM activities a JOIN clients c ON a.client_id = c.id WHERE date(a.activity_date) = date(?) ORDER BY a.activity_date ASC","service":"nexus-db","timestamp":"2025-06-23T11:22:48.088Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT co.*, c.name as client_name, c.surname as client_surname, p.name as product_name, p.supplier as product_supplier FROM contracts co JOIN clients c ON co.client_id = c.id LEFT JOIN products p ON co.product_id = p.id ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:22:49.636Z"}
{"error":"SQLITE_ERROR: no such column: co.product_id","level":"error","message":"Database all error","params":[],"query":"\n      SELECT co.*, c.name as client_name, c.surname as client_surname, \n             p.name as product_name, p.supplier as product_supplier\n      FROM contracts co\n      JOIN clients c ON co.client_id = c.id\n      LEFT JOIN products p ON co.product_id = p.id\n     ORDER BY co.created_at DESC","service":"nexus-db","stack":"Error: SQLITE_ERROR: no such column: co.product_id\n--> in Database#all('\\n' +\n  '      SELECT co.*, c.name as client_name, c.surname as client_surname, \\n' +\n  '             p.name as product_name, p.supplier as product_supplier\\n' +\n  '      FROM contracts co\\n' +\n  '      JOIN clients c ON co.client_id = c.id\\n' +\n  '      LEFT JOIN products p ON co.product_id = p.id\\n' +\n  '     ORDER BY co.created_at DESC', [], [Function (anonymous)])\n    at Database.all (C:\\progetti\\nexus-crm\\middleware\\logging.js:115:27)\n    at Contract.getAll (C:\\progetti\\nexus-crm\\models\\contract.js:23:8)\n    at C:\\progetti\\nexus-crm\\routes\\contracts.js:13:12\n    at Layer.handle [as handle_request] (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\progetti\\nexus-crm\\node_modules\\express\\lib\\router\\index.js:346:12)","timestamp":"2025-06-23T11:22:49.638Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:25:50.691Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:25:50.696Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:25:50.699Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:25:50.701Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:25:50.701Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:25:50.711Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:25:50.906Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE username = ?","service":"nexus-db","timestamp":"2025-06-23T11:26:06.635Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT co.*, c.name as client_name, c.surname as client_surname, p.name as product_name, p.supplier as product_supplier FROM contracts co JOIN clients c ON co.client_id = c.id LEFT JOIN products p ON co.product_id = p.id ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:26:13.698Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT * FROM clients ORDER BY name ASC","service":"nexus-db","timestamp":"2025-06-23T11:26:19.122Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT a.*, c.name as client_name, c.surname as client_surname FROM activities a JOIN clients c ON a.client_id = c.id ORDER BY a.activity_date DESC","service":"nexus-db","timestamp":"2025-06-23T11:26:21.577Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["2025-06-23"],"query":"SELECT a.*, c.name as client_name, c.surname as client_surname FROM activities a JOIN clients c ON a.client_id = c.id WHERE date(a.activity_date) = date(?) ORDER BY a.activity_date ASC","service":"nexus-db","timestamp":"2025-06-23T11:26:22.857Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT co.*, c.name as client_name, c.surname as client_surname, p.name as product_name, p.supplier as product_supplier FROM contracts co JOIN clients c ON co.client_id = c.id LEFT JOIN products p ON co.product_id = p.id ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:26:23.988Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT energy_type, COUNT(*) as count, SUM(value) as total_value FROM contracts WHERE status = 'accepted' GROUP BY energy_type","service":"nexus-db","timestamp":"2025-06-23T11:26:24.856Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT id, username, role, name, email, created_at FROM users","service":"nexus-db","timestamp":"2025-06-23T11:26:26.009Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT * FROM products ORDER BY name ASC","service":"nexus-db","timestamp":"2025-06-23T11:26:27.187Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:47:32.213Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:47:32.219Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:47:32.221Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:47:32.224Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:47:32.225Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:47:32.227Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:47:32.425Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE username = ?","service":"nexus-db","timestamp":"2025-06-23T11:47:49.330Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:49:42.894Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:49:42.897Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:49:42.898Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:49:42.899Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:49:42.900Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:49:42.901Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:49:43.089Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-23T11:49:56.751Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:49:56.986Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:49:56.989Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1,"33bcf635fd6caa73617651d4d9b6580a","::1","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36"],"query":"INSERT INTO user_sessions (user_id, session_id, ip_address, user_agent, login_time) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP)","service":"nexus-db","timestamp":"2025-06-23T11:49:56.995Z"}
{"error":"SQLITE_ERROR: no such column: failed_login_attempts","level":"error","message":"Database run error","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","stack":"Error: SQLITE_ERROR: no such column: failed_login_attempts","timestamp":"2025-06-23T11:49:57.014Z"}
{"error":"SQLITE_ERROR: no such column: failed_login_attempts","level":"error","message":"Errore nel reset tentativi falliti","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","stack":"Error: SQLITE_ERROR: no such column: failed_login_attempts","timestamp":"2025-06-23T11:49:57.015Z"}
{"error":"SQLITE_ERROR: no such column: last_login","level":"error","message":"Database run error","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","stack":"Error: SQLITE_ERROR: no such column: last_login","timestamp":"2025-06-23T11:49:57.019Z"}
{"error":"SQLITE_ERROR: no such column: last_login","level":"error","message":"Errore nell'aggiornamento last_login","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","stack":"Error: SQLITE_ERROR: no such column: last_login","timestamp":"2025-06-23T11:49:57.020Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:49:57.033Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:51:31.218Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:51:31.222Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:51:31.226Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:51:31.228Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:51:31.229Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:51:31.230Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:51:31.425Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-23T11:51:44.261Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:51:44.493Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:51:44.496Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1,"a2c2607cd4f9834bd5c1a10e04b5d16a","::1","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36"],"query":"INSERT INTO user_sessions (user_id, session_id, ip_address, user_agent, login_time) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP)","service":"nexus-db","timestamp":"2025-06-23T11:51:44.502Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:53:51.358Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:53:51.361Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:53:51.362Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:53:51.363Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:53:51.364Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:53:51.365Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:53:51.557Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-23T11:54:02.588Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:54:02.821Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:54:02.824Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1,"97733f52f65096dd3e9a96e6a302bf90","::1","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/137.0.0.0 Safari/537.36"],"query":"INSERT INTO user_sessions (user_id, session_id, ip_address, user_agent, login_time) VALUES (?, ?, ?, ?, CURRENT_TIMESTAMP)","service":"nexus-db","timestamp":"2025-06-23T11:54:02.830Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:55:02.363Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:55:02.366Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:55:02.367Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:55:02.368Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:55:02.369Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:55:02.370Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:55:02.565Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-23T11:55:12.812Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:13.045Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:13.048Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:13.095Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:21.617Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users ORDER BY created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:55:21.622Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:25.239Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:25.249Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:25.268Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:25.272Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[1],"query":"SELECT session_id, ip_address, user_agent, login_time, logout_time, is_active FROM user_sessions WHERE user_id = ? AND is_active = 1 ORDER BY login_time DESC","service":"nexus-db","timestamp":"2025-06-23T11:55:25.274Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:55:41.054Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-23T11:58:07.084Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:58:07.086Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:58:07.088Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:58:07.090Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:58:07.091Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-23T11:58:07.092Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-23T11:58:07.285Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-23T11:58:19.347Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:19.584Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:19.587Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:19.621Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["Q3Yx7gEP7x_IfYSWH55rjiTEAtBJ4RBu",4],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:19.657Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:28.261Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users ORDER BY created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:58:28.265Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:31.687Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[2],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:31.692Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:35.310Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users ORDER BY created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:58:35.312Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:36.992Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:36.995Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:37.013Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:37.016Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[1],"query":"SELECT session_id, ip_address, user_agent, login_time, logout_time, is_active FROM user_sessions WHERE user_id = ? AND is_active = 1 ORDER BY login_time DESC","service":"nexus-db","timestamp":"2025-06-23T11:58:37.018Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:58:50.409Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users ORDER BY created_at DESC","service":"nexus-db","timestamp":"2025-06-23T11:58:50.410Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-23T11:59:01.369Z"}
