{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T08:31:40.717Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:31:40.718Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:31:40.719Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:31:40.719Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:31:40.719Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:31:40.719Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T08:31:40.779Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T08:31:52.145Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:31:52.443Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:31:52.444Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:31:52.476Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["aigBVJeQwi6wDlr_WxGKk3z2baWWWnEF",13],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:31:52.500Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:31:55.649Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T08:31:55.652Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:31:57.116Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:32:09.509Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:32:17.354Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T08:34:43.020Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:34:43.021Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:34:43.022Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:34:43.022Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:34:43.022Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:34:43.022Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T08:34:43.081Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T08:37:17.564Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:17.865Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:17.866Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:17.890Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["FNAYWpCynC20bYIAHEo5QpTsn0TWiyV4",14],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:17.922Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:19.344Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T08:37:19.345Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:20.482Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:29.939Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:37:34.828Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:40:21.919Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T08:42:06.255Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:42:06.256Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:42:06.257Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:42:06.257Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:42:06.257Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:42:06.258Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T08:42:06.315Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T08:42:39.901Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:42:40.205Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:42:40.206Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:42:40.213Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["3gey8RCigI2MemMjBbOQsDBun0WalLJ1",15],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:42:40.238Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:42:41.299Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T08:42:41.301Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:42:42.329Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:43:04.852Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T08:45:25.294Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:45:25.295Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:45:25.296Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:45:25.296Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:45:25.296Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:45:25.296Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T08:45:25.352Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T08:45:36.650Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:45:36.957Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:45:36.958Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:45:36.968Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["q01fLq4BLfryTglvR7AFGhLATgKMtWWS",16],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:45:36.971Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:45:38.648Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T08:45:38.649Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:45:40.073Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:45:48.635Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T08:58:36.675Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:58:36.677Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:58:36.677Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:58:36.677Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:58:36.678Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T08:58:36.678Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T08:58:36.738Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T08:58:47.706Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:58:48.008Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:58:48.009Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:58:48.020Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["3MsgHTrY3aW02fSlY1y__8P4fWXyhLt3",17],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:58:48.047Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:58:49.275Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T08:58:49.277Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:58:50.607Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T08:59:00.222Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:07.112Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:10.853Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T09:03:10.854Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:12.384Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:20.425Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T09:03:32.144Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T09:03:32.146Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T09:03:32.146Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T09:03:32.147Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T09:03:32.147Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T09:03:32.147Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T09:03:32.209Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T09:03:41.657Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:41.953Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:41.955Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:41.981Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["ubWbZ0DFNIVeo7FvPER9vAiuFkY240p2",18],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:42.000Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:43.195Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T09:03:43.197Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:46.456Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T09:03:53.219Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T10:08:08.679Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:08:08.680Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:08:08.681Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:08:08.681Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:08:08.681Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:08:08.682Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T10:08:08.740Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T10:08:25.352Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:08:25.653Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:08:25.654Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:08:25.678Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["R6n9wpqSQdSRIhK3DC2Qo20koVZAqsyn",19],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:08:25.704Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:08:27.444Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:08:27.446Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:08:28.971Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:08:38.996Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T10:12:05.333Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:12:05.334Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:12:05.335Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:12:05.335Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:12:05.336Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:12:05.336Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T10:12:05.393Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T10:12:17.185Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:17.462Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:17.464Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:17.472Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["ge1xXMRcqGEclnplC6B_XbqUu12OpvEh",20],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:17.504Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:19.038Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:12:19.039Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:20.437Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:30.945Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:47.055Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,null,"04494920616",null,null,"Via Turco 11","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T10:12:47.057Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:47.073Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:12:47.074Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:56.188Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["2"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:56.189Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:59.474Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["2"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:12:59.476Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["2"],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:12:59.477Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["2"],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:12:59.480Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["2"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_kwh) as total_consumption, AVG(annual_consumption_kwh) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM electricity_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_kwh IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T10:12:59.481Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["2"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_smc) as total_consumption, AVG(annual_consumption_smc) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM gas_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_smc IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T10:12:59.485Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:14.803Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["2"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:14.804Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[2],"query":"SELECT * FROM activities WHERE client_id = ? ORDER BY activity_date DESC","service":"nexus-db","timestamp":"2025-06-25T10:13:14.806Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[2],"query":"SELECT co.*, p.name as product_name FROM contracts co LEFT JOIN products p ON co.product_id = p.id WHERE co.client_id = ? ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-25T10:13:14.807Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[2],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:13:14.808Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[2],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:13:14.809Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:29.724Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:13:29.725Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:38.329Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["2"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:38.330Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:38.352Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:13:38.353Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:39.832Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:13:47.541Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T10:20:13.969Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:20:13.971Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:20:13.971Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:20:13.972Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:20:13.972Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:20:13.972Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T10:20:14.031Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T10:20:23.849Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:24.144Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:24.145Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:24.158Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["MdRKv6NhzpjFLze9hf7eInOhtJKdRKtQ",21],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:24.177Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:25.314Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:20:25.315Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:25.920Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:20:25.921Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:26.496Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:20:26.497Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:33.284Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:20:42.904Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:21:52.841Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:21:54.096Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:21:54.097Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:21:55.908Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:22:03.327Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:24:08.795Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,null,"04494920616",null,null,"Via Duomo 215 80138 Napoli NA","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T10:24:08.797Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[null,null,null,null,null,null,null,null,null,null,null,2025,null,null,null,null,"Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities ( client_id, pod_code, utility_name, power_kw, voltage, meter_type, supplier, contract_start_date, contract_end_date, last_bill_date, annual_consumption_kwh, annual_consumption_year, utility_address, utility_city, utility_postal_code, utility_province, notes, is_active ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T10:24:08.806Z"}
{"error":"SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","level":"error","message":"Database run error","params":[null,null,null,null,null,null,null,null,null,null,null,2025,null,null,null,null,"Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities (\n        client_id, pod_code, utility_name, power_kw, voltage, meter_type,\n        supplier, contract_start_date, contract_end_date, last_bill_date,\n        annual_consumption_kwh, annual_consumption_year,\n        utility_address, utility_city, utility_postal_code, utility_province,\n        notes, is_active\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","timestamp":"2025-06-25T10:24:08.811Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:24:08.820Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["undefined"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:24:08.821Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T10:40:10.200Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:40:10.201Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:40:10.202Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:40:10.202Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:40:10.202Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:40:10.203Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T10:40:10.259Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T10:40:24.905Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:25.199Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:25.200Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:25.210Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["K8k3SRduCjTsliCb5N4Feb2GPtMi1N_u",22],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:25.243Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:27.087Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:40:27.089Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:32.886Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["3"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:32.888Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:32.898Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:40:32.898Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:35.733Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:40:35.734Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:36.330Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:40:36.331Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:39.176Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:49.991Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:55.208Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T10:40:55.210Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[null,null,null,null,null,null,null,null,null,null,null,2025,null,null,null,null,"Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities ( client_id, pod_code, utility_name, power_kw, voltage, meter_type, supplier, contract_start_date, contract_end_date, last_bill_date, annual_consumption_kwh, annual_consumption_year, utility_address, utility_city, utility_postal_code, utility_province, notes, is_active ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T10:40:55.219Z"}
{"error":"SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","level":"error","message":"Database run error","params":[null,null,null,null,null,null,null,null,null,null,null,2025,null,null,null,null,"Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities (\n        client_id, pod_code, utility_name, power_kw, voltage, meter_type,\n        supplier, contract_start_date, contract_end_date, last_bill_date,\n        annual_consumption_kwh, annual_consumption_year,\n        utility_address, utility_city, utility_postal_code, utility_province,\n        notes, is_active\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","timestamp":"2025-06-25T10:40:55.220Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[null],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:55.221Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:40:55.228Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:40:55.229Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:41:01.936Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["4"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:41:01.937Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[4],"query":"SELECT * FROM activities WHERE client_id = ? ORDER BY activity_date DESC","service":"nexus-db","timestamp":"2025-06-25T10:41:01.938Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[4],"query":"SELECT co.*, p.name as product_name FROM contracts co LEFT JOIN products p ON co.product_id = p.id WHERE co.client_id = ? ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-25T10:41:01.939Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[4],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:41:01.941Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[4],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:41:01.942Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:41:18.572Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["4"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:41:18.573Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:41:30.081Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["4"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:41:30.082Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["4"],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:41:30.083Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["4"],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:41:30.083Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["4"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_kwh) as total_consumption, AVG(annual_consumption_kwh) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM electricity_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_kwh IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T10:41:30.084Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["4"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_smc) as total_consumption, AVG(annual_consumption_smc) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM gas_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_smc IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T10:41:30.085Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T10:54:23.681Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:54:23.682Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:54:23.682Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:54:23.683Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:54:23.683Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T10:54:23.683Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T10:54:23.741Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T10:54:37.079Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:37.374Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:37.375Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["sLPM90gDVJcaIRMGO_YPex0YmfjoaJhT",23],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:37.410Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:37.411Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:39.015Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:54:39.016Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:39.868Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:54:39.870Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:40.457Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:54:40.458Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:43.825Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:50.779Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:54.636Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T10:54:54.637Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[null,null,null,null,null,null,null,null,null,null,null,2025,null,null,null,null,"Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities ( client_id, pod_code, utility_name, power_kw, voltage, meter_type, supplier, contract_start_date, contract_end_date, last_bill_date, annual_consumption_kwh, annual_consumption_year, utility_address, utility_city, utility_postal_code, utility_province, notes, is_active ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T10:54:54.646Z"}
{"error":"SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","level":"error","message":"Database run error","params":[null,null,null,null,null,null,null,null,null,null,null,2025,null,null,null,null,"Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities (\n        client_id, pod_code, utility_name, power_kw, voltage, meter_type,\n        supplier, contract_start_date, contract_end_date, last_bill_date,\n        annual_consumption_kwh, annual_consumption_year,\n        utility_address, utility_city, utility_postal_code, utility_province,\n        notes, is_active\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","timestamp":"2025-06-25T10:54:54.647Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[null],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:54.648Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:54:54.656Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T10:54:54.657Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:55:00.509Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["5"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:55:00.510Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:55:03.457Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["5"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:55:03.458Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["5"],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:55:03.459Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["5"],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T10:55:03.460Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["5"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_kwh) as total_consumption, AVG(annual_consumption_kwh) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM electricity_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_kwh IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T10:55:03.461Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["5"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_smc) as total_consumption, AVG(annual_consumption_smc) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM gas_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_smc IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T10:55:03.463Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:55:06.067Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["5"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:55:06.068Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T10:55:12.286Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T11:08:42.361Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:08:42.362Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:08:42.362Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:08:42.362Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:08:42.362Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:08:42.363Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T11:08:42.423Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T11:08:54.135Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:08:54.434Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:08:54.434Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:08:54.445Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["kHE7peozbW80puPuht5RTq-BsjBtdX5n",24],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:08:54.469Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:08:57.413Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:08:57.417Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:08:57.420Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:02.333Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:09:02.335Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:07.127Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["4"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:07.129Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:07.138Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:09:07.140Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:09.796Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["5"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:09.798Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:09.814Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:09:09.816Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:10.997Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:19.407Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:22.610Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:09:22.612Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[null,"IT001E81073372","Utenza Principale",15,"BT","Elettronico","ENEL ENERGIA",null,null,null,17378,2025,"Via Duomo 215","Napoli","80138","NA","Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities ( client_id, pod_code, utility_name, power_kw, voltage, meter_type, supplier, contract_start_date, contract_end_date, last_bill_date, annual_consumption_kwh, annual_consumption_year, utility_address, utility_city, utility_postal_code, utility_province, notes, is_active ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:09:22.622Z"}
{"error":"SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","level":"error","message":"Database run error","params":[null,"IT001E81073372","Utenza Principale",15,"BT","Elettronico","ENEL ENERGIA",null,null,null,17378,2025,"Via Duomo 215","Napoli","80138","NA","Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities (\n        client_id, pod_code, utility_name, power_kw, voltage, meter_type,\n        supplier, contract_start_date, contract_end_date, last_bill_date,\n        annual_consumption_kwh, annual_consumption_year,\n        utility_address, utility_city, utility_postal_code, utility_province,\n        notes, is_active\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","timestamp":"2025-06-25T11:09:22.625Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[null],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:22.633Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:22.640Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:09:22.641Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:24.909Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["6"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:24.911Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:27.917Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["6"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:09:27.918Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:09:27.919Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:09:27.920Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_kwh) as total_consumption, AVG(annual_consumption_kwh) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM electricity_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_kwh IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:09:27.920Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_smc) as total_consumption, AVG(annual_consumption_smc) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM gas_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_smc IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:09:27.922Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:10:36.024Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:10:37.207Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:10:37.210Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:10:37.211Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:11:19.905Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:11:19.907Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:11:21.683Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["6"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:11:21.685Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:11:24.041Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["6"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:11:24.042Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:11:24.043Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:11:24.044Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_kwh) as total_consumption, AVG(annual_consumption_kwh) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM electricity_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_kwh IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:11:24.045Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["6"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_smc) as total_consumption, AVG(annual_consumption_smc) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM gas_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_smc IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:11:24.045Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.923Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.924Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.925Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.925Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.925Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.926Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS electricity_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pod_code TEXT NOT NULL, utility_name TEXT, power_kw REAL, voltage TEXT CHECK(voltage IN ('BT', 'MT', 'AT')), meter_type TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_kwh INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.926Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS gas_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pdr_code TEXT NOT NULL, utility_name TEXT, meter_type TEXT, remi_code TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_smc INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:15:20.926Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T11:15:20.992Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T11:15:33.649Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:33.947Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:33.947Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:33.959Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["8k-JRfbAtsMx38h_Li-xqwNFpi-wI2T6",25],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:33.968Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:35.512Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:15:35.514Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:36.572Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:43.069Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:45.122Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:15:45.124Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[null,"IT001E81073372","Utenza Principale",15,"BT","Elettronico","ENEL ENERGIA",null,null,null,17378,2025,"Via Duomo 215","Napoli","80138","NA","Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities ( client_id, pod_code, utility_name, power_kw, voltage, meter_type, supplier, contract_start_date, contract_end_date, last_bill_date, annual_consumption_kwh, annual_consumption_year, utility_address, utility_city, utility_postal_code, utility_province, notes, is_active ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:15:45.132Z"}
{"error":"SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","level":"error","message":"Database run error","params":[null,"IT001E81073372","Utenza Principale",15,"BT","Elettronico","ENEL ENERGIA",null,null,null,17378,2025,"Via Duomo 215","Napoli","80138","NA","Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities (\n        client_id, pod_code, utility_name, power_kw, voltage, meter_type,\n        supplier, contract_start_date, contract_end_date, last_bill_date,\n        annual_consumption_kwh, annual_consumption_year,\n        utility_address, utility_city, utility_postal_code, utility_province,\n        notes, is_active\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","timestamp":"2025-06-25T11:15:45.135Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[null],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:45.136Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:45.142Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:15:45.143Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:53.022Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:15:53.023Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:15:53.024Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:15:56.420Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:06.151Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:09.068Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:16:09.069Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[null,"IT001E81073372","Utenza Principale",15,"BT","Elettronico","ENEL ENERGIA",null,null,null,17378,2025,"Via Duomo 215","Napoli","80138","NA","Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities ( client_id, pod_code, utility_name, power_kw, voltage, meter_type, supplier, contract_start_date, contract_end_date, last_bill_date, annual_consumption_kwh, annual_consumption_year, utility_address, utility_city, utility_postal_code, utility_province, notes, is_active ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:16:09.078Z"}
{"error":"SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","level":"error","message":"Database run error","params":[null,"IT001E81073372","Utenza Principale",15,"BT","Elettronico","ENEL ENERGIA",null,null,null,17378,2025,"Via Duomo 215","Napoli","80138","NA","Utenza creata automaticamente da bolletta ENEL",1],"query":"INSERT INTO electricity_utilities (\n        client_id, pod_code, utility_name, power_kw, voltage, meter_type,\n        supplier, contract_start_date, contract_end_date, last_bill_date,\n        annual_consumption_kwh, annual_consumption_year,\n        utility_address, utility_city, utility_postal_code, utility_province,\n        notes, is_active\n      ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","stack":"Error: SQLITE_CONSTRAINT: NOT NULL constraint failed: electricity_utilities.client_id","timestamp":"2025-06-25T11:16:09.080Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[null],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:09.081Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:09.084Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:09.085Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:11.216Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:11.217Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:11.218Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:15.543Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:15.544Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:15.545Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:17.377Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:17.378Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:18.241Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:18.243Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:22.488Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["6"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:22.489Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:22.499Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:22.500Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:26.340Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["7"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:26.340Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:26.349Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:26.350Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:29.416Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["8"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:29.418Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:29.427Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:29.428Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:30.967Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["1"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:30.968Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:33.189Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["1"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:33.190Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:33.191Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:16:33.192Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_kwh) as total_consumption, AVG(annual_consumption_kwh) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM electricity_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_kwh IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:16:33.192Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_smc) as total_consumption, AVG(annual_consumption_smc) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM gas_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_smc IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:16:33.193Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:38.060Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["1"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:16:38.061Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:17:42.502Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:17:50.417Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:17:56.130Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:17:56.131Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:17:56.132Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:08.960Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:18:08.961Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:10.800Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["1"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:10.801Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:13.204Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["1"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:13.205Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT * FROM electricity_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:18:13.207Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT * FROM gas_utilities WHERE client_id = ? AND is_active = 1 ORDER BY utility_name ASC, created_at ASC","service":"nexus-db","timestamp":"2025-06-25T11:18:13.208Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_kwh) as total_consumption, AVG(annual_consumption_kwh) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM electricity_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_kwh IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:18:13.209Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["1"],"query":"SELECT COUNT(*) as total_utilities, SUM(annual_consumption_smc) as total_consumption, AVG(annual_consumption_smc) as avg_consumption, MIN(annual_consumption_year) as oldest_year, MAX(annual_consumption_year) as newest_year FROM gas_utilities WHERE client_id = ? AND is_active = 1 AND annual_consumption_smc IS NOT NULL","service":"nexus-db","timestamp":"2025-06-25T11:18:13.209Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:17.469Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["1"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:17.470Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:33.064Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:48.514Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:18:53.677Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:20:14.768Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:20:21.753Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:20:21.754Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:20:21.755Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.390Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.391Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.392Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.392Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.392Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.393Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS electricity_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pod_code TEXT NOT NULL, utility_name TEXT, power_kw REAL, voltage TEXT CHECK(voltage IN ('BT', 'MT', 'AT')), meter_type TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_kwh INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.393Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS gas_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pdr_code TEXT NOT NULL, utility_name TEXT, meter_type TEXT, remi_code TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_smc INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:27:34.393Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T11:27:34.457Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T11:27:46.596Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:46.870Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:46.870Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:46.880Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["RE7MNp_JHPv6yY2Fwtk-2a8rS5IvJ1RY",26],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:46.906Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:48.680Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:27:48.683Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:27:48.684Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:51.375Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:27:51.376Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:53.186Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:27:58.809Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:28:07.464Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:31:53.008Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, eu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:31:53.027Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.is_active = 1 ORDER BY c.name ASC, c.surname ASC, gu.utility_name ASC","service":"nexus-db","timestamp":"2025-06-25T11:31:53.029Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:31:56.217Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT eu.*, c.name as client_name, c.surname as client_surname, c.company, c.phone, c.email FROM electricity_utilities eu JOIN clients c ON eu.client_id = c.id WHERE eu.contract_end_date IS NOT NULL AND eu.contract_end_date <= date('now', '+90 days') AND eu.contract_end_date >= date('now') AND eu.is_active = 1 ORDER BY eu.contract_end_date ASC","service":"nexus-db","timestamp":"2025-06-25T11:31:56.220Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT gu.*, c.name as client_name, c.surname as client_surname, c.company, c.phone, c.email FROM gas_utilities gu JOIN clients c ON gu.client_id = c.id WHERE gu.contract_end_date IS NOT NULL AND gu.contract_end_date <= date('now', '+90 days') AND gu.contract_end_date >= date('now') AND gu.is_active = 1 ORDER BY gu.contract_end_date ASC","service":"nexus-db","timestamp":"2025-06-25T11:31:56.223Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:01.079Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT energy_type, COUNT(*) as count, SUM(value) as total_value FROM contracts WHERE status = 'accepted' GROUP BY energy_type","service":"nexus-db","timestamp":"2025-06-25T11:32:01.105Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:03.340Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT co.*, c.name as client_name, c.surname as client_surname, p.name as product_name, p.supplier as product_supplier FROM contracts co JOIN clients c ON co.client_id = c.id LEFT JOIN products p ON co.product_id = p.id ORDER BY co.created_at DESC","service":"nexus-db","timestamp":"2025-06-25T11:32:03.344Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:04.095Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:04.110Z"}
{"level":"debug","message":"Database query executed","method":"all","params":["2025-06-25"],"query":"SELECT a.*, c.name as client_name, c.surname as client_surname FROM activities a JOIN clients c ON a.client_id = c.id WHERE date(a.activity_date) = date(?) ORDER BY a.activity_date ASC","service":"nexus-db","timestamp":"2025-06-25T11:32:04.112Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:06.375Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users ORDER BY created_at DESC","service":"nexus-db","timestamp":"2025-06-25T11:32:06.377Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:08.568Z"}
{"level":"debug","message":"Database query executed","method":"all","query":"SELECT * FROM products ORDER BY name ASC","service":"nexus-db","timestamp":"2025-06-25T11:32:08.569Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:11.499Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT a.*, c.name as client_name, c.surname as client_surname FROM activities a JOIN clients c ON a.client_id = c.id ORDER BY a.activity_date DESC","service":"nexus-db","timestamp":"2025-06-25T11:32:11.501Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:12.474Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:32:12.475Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:32:14.694Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:34:48.533Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:34:48.536Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:34:50.342Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:34:57.772Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:35:03.012Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:35:03.015Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:35:03.032Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["undefined"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:35:03.033Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.703Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.704Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.704Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.704Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.705Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.705Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS electricity_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pod_code TEXT NOT NULL, utility_name TEXT, power_kw REAL, voltage TEXT CHECK(voltage IN ('BT', 'MT', 'AT')), meter_type TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_kwh INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.705Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS gas_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pdr_code TEXT NOT NULL, utility_name TEXT, meter_type TEXT, remi_code TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_smc INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:37:36.705Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T11:37:36.761Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T11:37:47.660Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:47.957Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:47.958Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:47.966Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["zyWfSSEZjeZpV-QlMbmDRYZJZEXAGPYV",27],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:48.001Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:49.247Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:37:49.249Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:53.612Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["9"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:53.614Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:53.624Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:37:53.627Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:37:54.478Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:38:01.341Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:38:04.907Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:38:04.908Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:38:04.922Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["undefined"],"query":"SELECT * FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:38:04.923Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:38:10.046Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:38:10.047Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:39:10.430Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["10"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:39:10.431Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:39:10.444Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:39:10.445Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.063Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.064Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.064Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.064Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.064Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.065Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS electricity_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pod_code TEXT NOT NULL, utility_name TEXT, power_kw REAL, voltage TEXT CHECK(voltage IN ('BT', 'MT', 'AT')), meter_type TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_kwh INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.065Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS gas_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pdr_code TEXT NOT NULL, utility_name TEXT, meter_type TEXT, remi_code TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_smc INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:40:18.065Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T11:40:18.123Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T11:40:28.711Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:29.025Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:29.026Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:29.037Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["PdDlvX8x1HemLyXkDJH8eU-aDGnHysfd",28],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:29.054Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:30.291Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:40:30.293Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:31.377Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:43.348Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:40:50.265Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:40:50.268Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS users ( id INTEGER PRIMARY KEY AUTOINCREMENT, username TEXT UNIQUE NOT NULL, password TEXT NOT NULL, role TEXT NOT NULL, name TEXT NOT NULL, email TEXT, last_login DATETIME, failed_login_attempts INTEGER DEFAULT 0, account_locked BOOLEAN DEFAULT 0, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.373Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS clients ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, surname TEXT NOT NULL, company TEXT, vat_number TEXT, address TEXT, city TEXT, postal_code TEXT, phone TEXT, email TEXT, notes TEXT, consultant_id INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.374Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS activities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, title TEXT NOT NULL, description TEXT, activity_date DATETIME NOT NULL, status TEXT DEFAULT 'pending', consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.374Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS products ( id INTEGER PRIMARY KEY AUTOINCREMENT, name TEXT NOT NULL, description TEXT, energy_type TEXT NOT NULL, supplier TEXT, base_price REAL, is_active INTEGER DEFAULT 1, created_by INTEGER, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (created_by) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.375Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS contracts ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, product_id INTEGER, contract_type TEXT NOT NULL, energy_type TEXT NOT NULL, supplier TEXT, status TEXT DEFAULT 'pending', value REAL, start_date DATE, end_date DATE, notes TEXT, consultant_id INTEGER NOT NULL, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id), FOREIGN KEY (product_id) REFERENCES products (id), FOREIGN KEY (consultant_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.375Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS user_sessions ( id INTEGER PRIMARY KEY AUTOINCREMENT, user_id INTEGER NOT NULL, session_id TEXT NOT NULL, ip_address TEXT, user_agent TEXT, login_time DATETIME DEFAULT CURRENT_TIMESTAMP, logout_time DATETIME, is_active BOOLEAN DEFAULT 1, FOREIGN KEY (user_id) REFERENCES users (id) )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.375Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS electricity_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pod_code TEXT NOT NULL, utility_name TEXT, power_kw REAL, voltage TEXT CHECK(voltage IN ('BT', 'MT', 'AT')), meter_type TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_kwh INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.375Z"}
{"level":"debug","message":"Database query executed","method":"run","query":"CREATE TABLE IF NOT EXISTS gas_utilities ( id INTEGER PRIMARY KEY AUTOINCREMENT, client_id INTEGER NOT NULL, pdr_code TEXT NOT NULL, utility_name TEXT, meter_type TEXT, remi_code TEXT, supplier TEXT, contract_start_date DATE, contract_end_date DATE, last_bill_date DATE, annual_consumption_smc INTEGER, annual_consumption_year INTEGER, utility_address TEXT, utility_city TEXT, utility_postal_code TEXT, utility_province TEXT, notes TEXT, is_active BOOLEAN DEFAULT 1, created_at DATETIME DEFAULT CURRENT_TIMESTAMP, updated_at DATETIME DEFAULT CURRENT_TIMESTAMP, FOREIGN KEY (client_id) REFERENCES clients (id) ON DELETE CASCADE )","service":"nexus-db","timestamp":"2025-06-25T11:43:32.375Z"}
{"level":"debug","message":"Database query executed","method":"get","query":"SELECT * FROM users WHERE username = 'admin'","service":"nexus-db","timestamp":"2025-06-25T11:43:32.433Z"}
{"level":"debug","message":"Database query executed","method":"get","params":["admin"],"query":"SELECT * FROM users WHERE LOWER(username) = LOWER(?)","service":"nexus-db","timestamp":"2025-06-25T11:43:43.297Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET failed_login_attempts = 0, account_locked = 0 WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:43.615Z"}
{"level":"debug","message":"Database query executed","method":"run","params":[1],"query":"UPDATE users SET last_login = CURRENT_TIMESTAMP WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:43.616Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:43.629Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["w1xcbPHsc5DTs2r05nd_gHE6sOzwvKzu",29],"query":"UPDATE user_sessions SET session_id = ? WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:43.658Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:44.742Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:43:44.744Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:48.551Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["11"],"query":"DELETE FROM clients WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:48.552Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:48.562Z"}
{"level":"debug","message":"Database query executed","method":"all","params":[],"query":"SELECT id, name, surname, company, vat_number, fiscal_code, company_fiscal_code, phone, email, pec_email, city, province, client_status, last_contact_date, created_at FROM clients ORDER BY name ASC, surname ASC","service":"nexus-db","timestamp":"2025-06-25T11:43:48.567Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:49.417Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:55.965Z"}
{"level":"debug","message":"Database query executed","method":"get","params":[1],"query":"SELECT id, username, role, name, email, last_login, failed_login_attempts, account_locked, created_at FROM users WHERE id = ?","service":"nexus-db","timestamp":"2025-06-25T11:43:58.327Z"}
{"level":"debug","message":"Database query executed","method":"run","params":["IDA","ANGELINO","NGLDIA74A56I293T",null,null,null,"IDA ANGELINO","04494920616",null,null,"Via Duomo 215","Napoli","80138","NA",null,null,null,null,null,null,null,null,null,null,null,null,null,"prospect",null,null,null,1],"query":"INSERT INTO clients ( name, surname, fiscal_code, birth_date, birth_place, gender, company, vat_number, company_fiscal_code, company_legal_form, address, city, postal_code, province, legal_address, legal_city, legal_postal_code, legal_province, billing_address, billing_city, billing_postal_code, billing_province, phone, email, pec_email, website, reference_person, client_status, acquisition_date, last_contact_date, notes, consultant_id ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)","service":"nexus-db","timestamp":"2025-06-25T11:43:58.329Z"}
